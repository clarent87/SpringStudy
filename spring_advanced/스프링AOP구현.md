# ìŠ¤í”„ë§ AOP êµ¬í˜„

## í”„ë¡œì íŠ¸ ìƒì„±

- ë¡¬ë³µë§Œ ì¶”ê°€í•´ì„œ ë§Œë“¬
- `implementation 'org.springframework.boot:spring-boot-starter-aop'`
  - spring-data-jpa ê°™ì€ê±° dependencyë¥¼ ë„£ì—ˆë‹¤ë©´ aopê´€ë ¨ëœê±´ ìžë™ìœ¼ë¡œ ë“¤ì–´ì˜´.
  - ê·¼ë° ê·¸ëŸ°ê±° ì—†ì„ê²½ìš° ìœ„ì²˜ëŸ¼ ì¶”ê°€ í•„ìš”. aspectjweaberê°€ ë“¤ì–´ ì™”ë‹¤ë©´ ì„±ê³µ

- í¬ì¸íŠ¸
  - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•„ë‹ˆë¼ì„œ í†°ìº£ê°™ì€ê±°ëŠ” ì—†ë‹¤. ì¦‰ ì‹¤í–‰í•˜ë©´ ë¡œê·¸ ì°ê³  ì¢…ë£Œë¨.
  - > ê·¼ë° ë‚´ covëŠ” ì™œ ëŒë¦¬ë©´ ê³„ì†ëŒì§€? ìŠ¤ì¼€ì¥´ëŸ¬ ë•Œë¬¸?

## ì˜ˆì œ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° (3)

- ê°œìš”
  - ì˜ˆì œ í”„ë¡œì íŠ¸ ë§Œë“¬
  - ê·¸ë¦¬ê³  AopTest ë§Œë“¬

- í¬ì¸íŠ¸ ðŸ‘
  - `AopUtils.isAopProxy(orderService)` ë¡œ aopproxyê°€ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
  - > ì´ê±° ì•žì—ì„œë„ í•œë²ˆ ë‚˜ì™”ë˜ê±° ê°™ìŒ. ê·¸ë¦¬ê³  ì´ê±°ë¡œëŠ” ì§ì ‘ ë§Œë“  proxyëŠ” ì²´í¬ ì•ˆë¨

## ìŠ¤í”„ë§ AOP êµ¬í˜„ 1 - ì‹œìž‘ (6)

- í¬ì¸íŠ¸
  - ìŠ¤í”„ë§ AOPë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” @Aspect ì• ë…¸í…Œì´ì…˜ì„ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ”ë°,
  - ì´ ì• ë…¸í…Œì´ì…˜ë„ AspectJê°€ ì œê³µí•˜ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.
    - > pdfì— ì´ëŸ° ë§ì´ ìžˆëŠ”ë°, ì´ê±´ spring ì´ aspectjì˜ ê»ë°ê¸°(interface, annotatino)ë“±ì„ ê°€ì ¸ì™€ì„œ ì“´ë‹¤ëŠ”ê²ƒ
    - > `org.aspectj.lang.annotation.Around;` ê°™ì€ importë¬¸ì„ ë³´ë©´ aspectjêº¼ë¼ëŠ”ê±¸ ì•Œìˆ˜ ìžˆìŒ
  - @Aspect ë¥¼ í¬í•¨í•œ org.aspectj íŒ¨í‚¤ì§€ ê´€ë ¨ ê¸°ëŠ¥ì€ aspectjweaver.jar ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.
  - ì•žì„œ build.gradle ì— spring-boot-starter-aop ë¥¼ í¬í•¨í–ˆëŠ”ë°,
  - ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í”„ë§ì˜ AOP ê´€ë ¨ ê¸°ëŠ¥ê³¼ í•¨ê»˜ aspectjweaver.jar ë„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ì˜ì¡´ ê´€ê³„ì— í¬í•¨ëœë‹¤

- ì¤‘ìš” í¬ì¸íŠ¸
  - ì•žì„œ ë‚˜ì˜¨ ì–˜ê¸° ì§€ë§Œ @Aspect ë¶™ì€ classë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì¤˜ì•¼ aopê°€ ë™ìž‘
  - `@Import(AspectV1.class) //ì¶”ê°€`
    - í…ŒìŠ¤íŠ¸ ì½”ë“œì— ì´ë ‡ê²Œ ì¶”ê°€í–ˆëŠ”ë° ì´ëŸ¬ë©´ AscpectV1ì´ ë¹ˆë“±ë¡ì´ ëœë‹¤
    - ë³´í†µ importëŠ” configuration ë“±ë¡ì— ì»ìŒ.

- í¬ì¸íŠ¸
  - `joinPoint.getSignature()`ì˜ ê²°ê³¼
    - `String hello.aop.order.OrderRepository.save(String)`

- í¬ì¸íŠ¸2
  - @Aspect ëŠ” ì• ìŠ¤íŽ™íŠ¸ë¼ëŠ” í‘œì‹ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤
  - **ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²•** ðŸ‘
    - @Bean ì„ ì‚¬ìš©í•´ì„œ ì§ì ‘ ë“±ë¡
    - @Component ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•´ì„œ ìžë™ ë“±ë¡
    - @Import ì£¼ë¡œ ì„¤ì • íŒŒì¼ì„ ì¶”ê°€í•  ë•Œ ì‚¬ìš©( @Configuration )

## ìŠ¤í”„ë§ AOP êµ¬í˜„ 2 - í¬ì¸íŠ¸ì»· ë¶„ë¦¬ (10)

- ê°œìš”
  - @Aroundì— í¬ì¸íŠ¸ ì»· ë„£ì—ˆë˜ê²ƒì„ ë¶„ë¦¬í•¨
  - AspectV2 classì— í•´ë‹¹ ë‚´ìš©ì´ ìžˆìŒ -> ì£¼ì„ ìžˆìœ¼ë‹ˆ ì°¸ì¡° ë°”ëžŒ

- í¬ì¸íŠ¸
  - `@Pointcut(~)` ë¡œ @Aroundì˜ í¬ì¸íŠ¸ì»·ì„ ë¶„ë¦¬í•´ëƒ„
  - ì´ë ‡ê²Œ ë¶„ë¦¬í•œ í¬ì¸íŠ¸ì»·ì€ ìž¬ì‚¬ìš© ê°€ëŠ¥
  - ê·¸ë¦¬ê³  methodëª…ìœ¼ë¡œ ì˜ë¯¸ ë¶€ì—¬ê°€ëŠ¥
    - > ì˜ˆì‹œì—ì„œëŠ” allOrderë¼ëŠ” methodëª…ìœ¼ë¡œ í¬ì¸íŠ¸ì»·ì„ ì§€ì¹­í•˜ê²Œ í•¨

- í¬ì¸íŠ¸2
  - ë©”ì„œë“œ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„°ë¥¼ í•©ì³ì„œ í¬ì¸íŠ¸ì»· ì‹œê·¸ë‹ˆì²˜(signature)ë¼ í•œë‹¤.
  - ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ìž…ì€ void ì—¬ì•¼ í•œë‹¤.
  - ì½”ë“œ ë‚´ìš©ì€ ë¹„ì›Œë‘”ë‹¤

- ì˜ë¬¸  
  - > ê·¸ë¦¬ê³  í¬ì¸íŠ¸ì»·ì— param ë„£ëŠ”ê±° ë‚˜ì¤‘ì— ë‚˜ì˜¨ë‹¤ê³  í–ˆìŒ
  - > ì´ê±° ì—¬ê¸° ë‚´ìš©ì´ì—ˆë‚˜?

## ìŠ¤í”„ë§ AOP êµ¬í˜„ 3 - ì–´ë“œë°”ì´ìŠ¤ ì¶”ê°€ (12)

- ê°œìš”
  - íŠ¸ëžœìž­ì…˜ ê¸°ëŠ¥ì„ ì¶”ê°€
  - ì¡°ê¸ˆë” ë³µìž¡í•œ ì˜ˆì œë¥¼ í•œë‹¤
  - í¬ì¸íŠ¸ì»·ì„ ì–´ë“œë°”ì´ìŠ¤ì— ì—¬ëŸ¬ê°œ ì¶”ê°€í•œ ì˜ˆì œ
    - > proxy ë§Œë“¤ë–„ í•˜ë‚˜ì˜ proxyì— ì—¬ëŸ¬ ì–´ë“œë°”ì´ì €ê°€ ë¶™ì„ìˆ˜ ìžˆë‹¤ëŠ”ê±°ëž‘ì€ ìƒê´€ì—†ë‹¤.
  - AspectV3ì— ë§Œë“¬

- í¬ì¸íŠ¸
  - ë³´í†µ íŠ¸ëžœìž­ì…˜ì€ service ê³„ì¸µì— ë¶™ì¸ë‹¤ê³  í•œë‹¤. ( ì¦‰, service classì— ì ìš©)

- í¬ì¸íŠ¸2
  - `@Around("allOrder() && allService()")`
    - && (AND), || (OR), ! (NOT) 3ê°€ì§€ ì¡°í•©ì´ ê°€ëŠ¥

- í¬ì¸íŠ¸3
  - `@Pointcut("execution(* *..*Service.*(..))")`
    - ì—¬ê¸°ì„œ í¬ì¸íŠ¸ì»·ì€ class, interfaceì— ëª¨ë‘ ì ìš©ì´ ë¨
    - íƒ€ìž… ì´ë¦„ íŒ¨í„´ì´ *Service ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸

- í¬ì¸íŠ¸4
  - ê·¼ë° ì ìš©ëœ aopì˜ ìˆœì„œë¥¼ ë°”ê¾¸ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?
    - ì˜ˆì‹œì—ì„œëŠ” logê°€ ë¨¼ì € ì¶œë ¥ë˜ê³  ê·¸ë‹¤ìŒ txê°€ í˜¸ì¶œë˜ì—ˆìŒ
    - > ì¼ë‹¨ ì´ê±´ ë‹¤ìŒì— ì•Œì•„ë³¸ë‹¤

ë‹¤ìŒì ˆì—ì„œëŠ” aop ìˆœì„œì•Œì•„ë³´ê¸° ì´ì „ì— í¬ì¸íŠ¸ì»·ì„ ì™¸ë¶€ë¡œ ë¹¼ì„œ ê°œë°œí•˜ëŠ” ê²ƒì„ ì•Œì•„ë³¸ë‹¤.

- Q/A
  - Aspectì•ˆì— aroundë¡œ ìž‘ì„±í•œ adviceê°€ ì—¬ëŸ¬ê°œ ì¸ê²½ìš° @Aspect Advisor ë¹Œë” ë‚´ë¶€ì— ëª‡ê°œì˜ ì–´ë“œë°”ì´ì €ê°€ ìƒì„±ë˜ëŠ”ê°€?
    - > ë‹µë³€ ëª¨í˜¸í•˜ê²Œ ë‚˜ì˜´.
    - > ì–´ë“œë°”ì´ì €ê°€ ì—¬ëŸ¬ê°œ ìƒì„±ë˜ëŠ”ê²Œ ë§žì„ê±° ê°™ê¸´í•¨ --> ìŠ¤í”„ë§ AOP êµ¬í˜„ 6 - ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜ì—ë„ ë¹„ìŠ·í•œ Q/Aê°€ ìžˆìŒ
    - > ì˜ˆë¥¼ë“¤ì–´ @Aspect classê°€ ë‘ê°œê°€ ìžˆê³  ê°ê° adviceê°€ ë‘ê°œê°€ ìžˆì„ë•Œ, ê°ê°ì—ì„œ í•˜ë‚˜ì”© adviceê°€ ë§¤ì¹­ë˜ëŠ” targetì´ ìžˆë‹¤ë©´?
      - >@Aspectë‹¨ìœ„ë¡œ advisorë¥¼ ë§Œë“œëŠ”ê²ƒë³´ë‹¤ @Around ë‹¨ìœ„ë¡œ advisorê°€ ë§Œë“¤ì–´ ì§€ëŠ”ê²ƒì´ íš¨ìœ¨ì  ì¼ë“¯

## ìŠ¤í”„ë§ AOP êµ¬í˜„ 4 - í¬ì¸íŠ¸ì»· ì°¸ì¡° (15)

- ê°œìš”
  - ë‹¤ìŒê³¼ ê°™ì´ í¬ì¸íŠ¸ì»·ì„ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë³„ë„ì˜ ì™¸ë¶€ í´ëž˜ìŠ¤ì— ëª¨ì•„ë‘ì–´ë„ ëœë‹¤.
  - ì°¸ê³ ë¡œ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  ë•ŒëŠ” í¬ì¸íŠ¸ì»·ì˜ ì ‘ê·¼ ì œì–´ìžë¥¼ public ìœ¼ë¡œ ì—´ì–´ë‘ì–´ì•¼ í•œë‹¤

- í¬ì¸íŠ¸
  - @Aspect classì—ì„œ ë”°ë¡œ classë§Œë“¤ì–´ì„œ í¬ì¸íŠ¸ì»·ì„ ëº€ê²½ìš°..
  - @Aroundì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ í•´ë‹¹ í¬ì¸íŠ¸ì»· methodì˜ full ê²½ë¡œëŠ” ë„£ì–´ì•¼í•¨. ì¦‰, íŒ¨í‚¤ì§€ ê²½ë¡œ í¬í•¨í•„ìš”

- q/a
  - Pointcust í´ëž˜ìŠ¤ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë‹ˆê¹ @Around("Pointcuts.allOrder()") ì´ë ‡ê²Œ í•´ë„ ë˜ëŠ”ë° ì™œ ê°•ì˜ì—ì„œëŠ” ê²½ë¡œë¥¼ ì§€ì •í•´ì„œ í•œê±´ê°€ìš”?
  - > Pointcuts ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ ì•„ë§ˆë„ ê°™ì€ íŒ¨í‚¤ì§€ì— ìžˆì–´ì„œ ì„±ê³µí•˜ì…¨ì„ ê±°ì—ìš”.
  - > ì €ë„ ì •í™•ížˆëŠ” ëª¨ë¥´ê² ì§€ë§Œ, ê°™ì€ íŒ¨í‚¤ì§€ì¸ ê²½ìš°ì—ëŠ” ì˜ˆì™¸ì ìœ¼ë¡œ í—ˆìš©ì´ ë˜ëŠ” ê²ƒ ê°™ì•„ìš”

## ìŠ¤í”„ë§ AOP êµ¬í˜„ 5 - ì–´ë“œë°”ì´ìŠ¤ ìˆœì„œ (18)

- ê°œìš”
  - ì–´ë“œë°”ì´ìŠ¤ ìˆœì„œ ì„¸íŒ…ë²•
  - AspectV5Orderë§Œë“¬
  - @Orderë¥¼ ì´ìš©í–ˆê³ , ì´ê±´ class levelë¡œ ë¶™ì¼ìˆ˜ ìžˆìŒ

- í¬ì¸íŠ¸
  - **ì–´ë“œë°”ì´ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆœì„œë¥¼ ë³´ìž¥í•˜ì§€ ì•ŠëŠ”ë‹¤.**
  - ìˆœì„œë¥¼ ì§€ì •í•˜ê³  ì‹¶ìœ¼ë©´ @Aspect ì ìš© ë‹¨ìœ„ë¡œ org.springframework.core.annotation.@Order ì• ë…¸í…Œì´ì…˜ì„ ì ìš©í•´ì•¼ í•œë‹¤.
  - ë¬¸ì œëŠ” ì´ê²ƒì„ ì–´ë“œë°”ì´ìŠ¤ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ í´ëž˜ìŠ¤ ë‹¨ìœ„ë¡œ ì ìš©í•  ìˆ˜ ìžˆë‹¤ëŠ” ì ì´ë‹¤.
  - ê·¸ëž˜ì„œ ì§€ê¸ˆì²˜ëŸ¼ í•˜ë‚˜ì˜ ì• ìŠ¤íŽ™íŠ¸ì— ì—¬ëŸ¬ ì–´ë“œë°”ì´ìŠ¤ê°€ ìžˆìœ¼ë©´ ìˆœì„œë¥¼ ë³´ìž¥ ë°›ì„ ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì• ìŠ¤íŽ™íŠ¸ë¥¼ ë³„ë„ì˜ í´ëž˜ìŠ¤ë¡œ ë¶„ë¦¬í•´ì•¼ í•œë‹¤.

- í¬ì¸íŠ¸2
  - @Aspect ì•ˆì˜ ì–´ë“œë°”ì´ìŠ¤ ë“¤ì€ ìˆœì„œ ë³´ìž¥ì´ ì•ˆë¨
  - @Aspect ë§Œ ìˆœì„œ ë³´ìž¥ì´ ë¨
  - > @Orderë¥¼ ì´ìš©í•´ì„œ ìˆœì„œë¥¼ ì„¸íŒ…í•˜ëŠ”ê±´ë°, ì´ê²Œ Aspectì—ë§Œ ì ìš©ë˜ê¸° ë–„ë¬¸, ë”°ë¼ì„œ
  - > Aspectì•ˆì˜ adviceê°„ ìˆœì„œë¥¼ ë§žì¶”ë ¤ë©´ ì˜ˆì œì²˜ëŸ¼ ê°ê° classë¡œ ë¹¼ì•¼í•¨.

- ì˜ê²¬
  - @Order(2) ì´ê±° bean ë“±ë¡ì—ë„ ì“°ë˜ê±° ì•„ë‹Œê°€?? --> í™•ì¸ í•„ìš”

- Q/A
  - @Orderê°€ ì ìš© ëœ Aspectì™€ ì ìš©ë˜ì§€ ì•Šì€ Aspectë¥¼ ì„žì–´ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ìˆœì„œê°€ ì–´ë–»ê²Œ ì ìš© ë˜ëŠ” ì§€ ë¬¸ì˜ ë“œë¦½ë‹ˆë‹¤.
  - > ì´ëŸ° ê²½ìš°ëŠ” ìŠ¤í”„ë§ ë©”ë‰´ì–¼ì— ëª…í™•í•˜ê²Œ ëª…ì‹œê°€ ë˜ì–´ ìžˆì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìˆœì„œë¥¼ ë³´ìž¥í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

## ìŠ¤í”„ë§ AOP êµ¬í˜„ 6 - ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜ (20)

- ê°œìš”
  - ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜ ì†Œê°œ
  - ì—¬ê¸°ê¹Œì§€ ì•Œë©´ aopëŠ” ë‹¤ ì•Œê²Œ ë˜ëŠ”ê²ƒ ( ë‚¨ì€ê±´ í¬ì¸íŠ¸ì»· ì •ë„..)
  - AspectV6Advice ìž‘ì„±

- ì–´ë“œë°”ì´ìŠ¤ ì¢…ë¥˜
  - @Around
    - ë©”ì„œë“œ í˜¸ì¶œ ì „í›„ì— ìˆ˜í–‰, **ê°€ìž¥ ê°•ë ¥í•œ ì–´ë“œë°”ì´ìŠ¤**, ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì—¬ë¶€ ì„ íƒ, ë°˜í™˜ ê°’ ë³€í™˜, ì˜ˆì™¸ ë³€í™˜ ë“±ì´ ê°€ëŠ¥
    - > ì‚¬ì‹¤ ë‚˜ë¨¸ì§€ ê¸°ëŠ¥ì€ Aroundì˜ ê¸°ëŠ¥ì„ ì¡°ê°ë‚´ì„œ ì‚¬ìš©í• ìˆ˜ ìžˆê²Œ ì¤€ë¹„ ëœê²ƒ -> ì½”ë“œ ë³´ë©´ ì•ˆë‹¤.
  - @Before
    - ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ ì´ì „ì— ì‹¤í–‰
    - ì´ê±° ì‚¬ìš©í•˜ë©´ @Before ì–´ë“œë°”ì´ìŠ¤ í˜¸ì¶œí›„ joinpoint (ì¦‰, target)ì€ ìžë™ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.
    - `JoinPoint joinPoint` íŒŒë¼ë©”í„°ë¥¼ ë°›ë„ë¡ adviceë¥¼ ë§Œë“¤ì—ˆëŠ”ë°, ì´ê±° í•„ìš” ì—†ìœ¼ë©´ íŒŒë¼ë©”í„° ì—†ì´ adviceë§Œë“¤ì–´ë„ ëœë‹¤.
    - `@Before("hello.aop.order.aop.Pointcuts.orderAndService()")`
      - > ë‹¹ì—°ížˆ Around ë•Œì²˜ëŸ¼ annotation ì•ˆì—ëŠ” í¬ì¸íŠ¸ì»· ë„£ì–´ì•¼í•¨
  - @AfterReturning
    - ì¡°ì¸ í¬ì¸íŠ¸ê°€ ì •ìƒ ì™„ë£Œí›„ ì‹¤í–‰

    ```java
    // returning = "result" ì´ë¯€ë¡œ methodì˜ result ë³€ìˆ˜ì— targetì˜ ë°˜í™˜ê°’ì´ ë‹´ê²¨ì„œ ì˜¨ë‹¤.
    @AfterReturning(value = "hello.aop.order.aop.Pointcuts.orderAndService()", returning = "result")
    public void doReturn(JoinPoint joinPoint, Object result) {
        // resultê°’ ì¡°ìž‘ì€ ë¶ˆê°€ëŠ¥.
        // ë¬´ìŠ¨ë§ì´ëƒë©´ targetì˜ ë¦¬í„´ê°’ì„ ë”´ê±¸ë¡œ ì¹˜í™˜í•´ì„œ ë°˜í™˜í• ìˆ˜ëŠ” ì—†ë‹¤ëŠ” ë§
        // ë‹¨. resultë¥¼ ì¡°ìž‘í• ìˆ˜ëŠ” ìžˆìŒ. ( ex. result ê°ì²´ ì•ˆì— ë³€ìˆ˜ê°€ ìžˆê³  setterê°€ ì§€ì›ë˜ë©´ í•´ë‹¹ í•„ë“œë¥¼ ë³€ê²½í• ìˆ˜ëŠ” ìžˆìŒ)
        log.info("[return] {} return={}", joinPoint.getSignature(), result);
    }
    ```

  - @AfterThrowing
    - ë©”ì„œë“œê°€ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²½ìš° ì‹¤í–‰
  - @After
    - ì¡°ì¸ í¬ì¸íŠ¸ê°€ ì •ìƒ ë˜ëŠ” ì˜ˆì™¸ì— ê´€ê³„ì—†ì´ ì‹¤í–‰(finally)

- í¬ì¸íŠ¸
  - ~~ì´í•´ í• ë•Œ ë‚˜ë¨¸ì§€ ì–´ë“œë°”ì´ìŠ¤ëŠ” @Aroundì˜ tryë¬¸ ì•Šì— ìžˆë‹¤ê³  ìƒê°í•˜ëŠ”ê²Œ ì¢‹ìŒ. íŠ¹ížˆ After..~~
    - Afterì˜ ê²½ìš° Aroundì˜ finally ìœ„ì¹˜ì—ì„œ í˜¸ì¶œë˜ëŠ”ê²ƒì€ ì•„ë‹˜. ë¡œê·¸ë¥¼ ë³´ë‹ˆ try bodyì´ê¸´ í•¨. ë¬¼ë¡  proceedì—ì„œ ì˜ˆì™¸ ë‚˜ì™€ë„
    - í˜¸ì¶œë˜ê¸´ í•˜ê² ì§€ë§Œ finally ì²˜ëŸ¼
  - > ì´ê±° ì•„ëž˜ Aspect ì•ˆì—ì„œ adviceê°€ ê±¸ë¦¬ëŠ” ìˆœì„œë¥¼ ì´í•´í•˜ë©´ ì™¸ì´ëŸ°ì§€ ì‰½ê²Œ ì•Œìˆ˜ ìžˆìŒ

- í¬ì¸íŠ¸2
  - í˜¸ì¶œ ê²°ê³¼
    - [around][íŠ¸ëžœìž­ì…˜ ì‹œìž‘] void hello.aop.order.OrderService.orderItem(String)
    - [before] void hello.aop.order.OrderService.orderItem(String)
    - [orderService] ì‹¤í–‰
    - [orderRepository] ì‹¤í–‰
    - [return] void hello.aop.order.OrderService.orderItem(String) return=null
    - [after] void hello.aop.order.OrderService.orderItem(String)
    - [around][íŠ¸ëžœìž­ì…˜ ì»¤ë°‹] void hello.aop.order.OrderService.orderItem(String)
    - [around][ë¦¬ì†ŒìŠ¤ ë¦´ë¦¬ì¦ˆ] void hello.aop.order.OrderService.orderItem(String)

**pdfì— ë‚´ìš©ì´ ìžì„¸í•˜ë‹ˆ ê·¸ê±¸ ì°¸ì¡°í•˜ëŠ”ê²Œ ì¢‹ìŒ**

- @AfterReturning
  - returning ì ˆì— ì§€ì •ëœ íƒ€ìž…ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë§Œ ëŒ€ìƒìœ¼ë¡œ ì‹¤í–‰í•œë‹¤.( ë¶€ëª¨íƒ€ìž… ì§€ì •ì‹œ ìžì‹íƒ€ìž…ë„ ì¸ì •ë¨)
    - > ì´ê±° ì²˜ìŒë³´ë©´ ë¬´ìŠ¨ë§ì¸ê°€ ì‹¶ìŒ

    ```java
      // í˜„ìž¬ ì•„ëž˜ adviceì˜ targetì€ public void orderItem(String itemId) ì´ë‹¤
      // returning ì ˆì— ì§€ì •ëœ íƒ€ìž…ì˜ ê°’ì€ Stringì¸ë° target methodëŠ” void returnì´ë¯€ë¡œ, ì–´ë“œë°”ì´ìŠ¤ ì ìš© ëŒ€ìƒì—ì„œ ì œì™¸ë¨
      // ì´ê²½ìš° ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´ Object resultë¡œ í•´ì£¼ë©´ ëœë‹¤.
      // [*] intellijì˜ ê²½ìš° adviceì˜†ì— iconìœ¼ë¡œ í•´ë‹¹ ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë˜ëŠ” methodë¥¼ ë³´ì—¬ì£¼ëŠ”ë°, targetì´ voidì¸ê²½ìš°ëŠ”, ìž˜ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ”ë“¯
      @AfterReturning(value = "hello.aop.order.aop.Pointcuts.orderAndService()", returning = "result")
      public void doReturn(JoinPoint joinPoint, String result) {
          log.info("[return] {} return={}", joinPoint.getSignature(), result);
      }

    ```

  - @Around ì™€ ë‹¤ë¥´ê²Œ ë°˜í™˜ë˜ëŠ” ê°ì²´ë¥¼ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ë‹¤. ë°˜í™˜ ê°ì²´ë¥¼ ë³€ê²½í•˜ë ¤ë©´ @Around ë¥¼ ì‚¬ìš©í•´ì• í•œë‹¤. ì°¸ê³ ë¡œ ë°˜í™˜ ê°ì²´ë¥¼ ì¡°ìž‘í•  ìˆ˜ ëŠ” ìžˆë‹¤.
    - > ì´ê±° ì•žì„  ì½”ë“œì—ì„œ ì„¤ëª…í•¨

- @Around
  - ê°€ëŠ¥í•œ ê¸°ëŠ¥
    - ì „ë‹¬ ê°’ ë³€í™˜: joinPoint.proceed(args[])
    - ë°˜í™˜ ê°’ ë³€í™˜
    - ì˜ˆì™¸ ë³€í™˜
    - íŠ¸ëžœìž­ì…˜ ì²˜ëŸ¼ try ~ catch~ finally ëª¨ë‘ ë“¤ì–´ê°€ëŠ” êµ¬ë¬¸ ì²˜ë¦¬ ê°€ëŠ¥
      - > ê·¸ëƒ¥ bodyì— try/catch ì“¸ìˆ˜ ìžˆë‹¤ëŠ”ê±° ê°™ìŒ
    - proceed() ë¥¼ ì—¬ëŸ¬ë²ˆ ì‹¤í–‰í•  ìˆ˜ë„ ìžˆìŒ(ìž¬ì‹œë„)
      - > ê·¸.. redismqì—ì„œ failoverì²˜ë¦¬ê°€ ì´ê±°ì˜€ë‚˜ë´„.

- ìŠ¤í”„ë§ì€ 5.2.7 ë²„ì „ë¶€í„° ë™ì¼í•œ @Aspect ì•ˆì—ì„œ ë™ì¼í•œ ì¡°ì¸í¬ì¸íŠ¸ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì •í–ˆë‹¤
  - pdfì°¸ì¡°.
    - ì‹¤í–‰ ìˆœì„œ: @Around , @Before , @After , @AfterReturning , @AfterThrowing ðŸ‘
    - > ì‹¤í–‰ ìˆœì„œë¼ê¸° ë³´ë‹¨ adviceê°€ ê±¸ë¦° ìˆœì„œë¡œ ë³´ë©´ ëœë‹¤.
    - > ê·¸ëŸ¼ í˜¸ì¶œ ìˆœì„œëŠ” ìœ„ì™€ ê°™ê³ , ë¦¬í„´ìˆœì„œëŠ” ë°˜ëŒ€ë¼ëŠ”ê²Œ ì‰½ê²Œ ì´í•´ë¨

- @Around ì™¸ì— ë‹¤ë¥¸ ì–´ë“œë°”ì´ìŠ¤ê°€ ì¡´ìž¬í•˜ëŠ” ì´ìœ  ðŸ‘
  - ê°œë°œìžê°€ ì‹¤ìˆ˜ë¡œ joinPoint.proceed() ë¥¼ ë¹¼ë¨¹ì„ìˆ˜ ìžˆê¸° ë•Œë¬¸ì—...
  - **ì¢‹ì€ ì„¤ê³„ëŠ” ì œì•½ì´ ìžˆëŠ” ê²ƒì´ë‹¤**
  - ê·¸ë¦¬ê³  @Beforeë¥¼ ì´ìš©í•˜ë©´ ì˜ë„ê°€ ìž˜ ë“œëŸ¬ë‚œë‹¤
    - > ì¦‰ target í˜¸ì¶œì „ ë¬´ì—‡ì„ í•˜ëŠ”êµ¬ë‚˜..ë¥¼ ì•Œìˆ˜ ìžˆìŒ
    - > ë‹¨ìˆœ Aroundë¡œ ì²˜ë¦¬ í•´ë²„ë¦¬ë©´, ë­”ì¼ì„ í•˜ëŠ”ì§€ ë‹¤ ë´ì•¼í•¨( targetí˜¸ì¶œ ì•žë’¤ë¡œ ë­˜í•˜ëŠ”ì§€...)

- Q/A
  - ì‹¤ë¬´ì—ì„œëŠ” ìœ„ ì–´ë“œë°”ì´ìŠ¤ì¤‘ return íƒ€ìž…ì— ëŒ€í•œ ë¶€ë¶„ì€ ìž˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•¨
  - > ?
  
## ì •ë¦¬
