# 스프링이 지원하는 프록시

## 프록시 팩토리 - 소개

- 개요 
  - 프록시 팩토리 소개

- 중요 포인트
  -  프록시 팩토리는 인터페이스가 있으면 JDK 동적 프록시를 사용하고,
  -  구체 클래스만 있다면 CGLIB를사용한다. 그리고 이 설정을 변경할 수도 있다.
  -  > 내가 쓴 Async는 interface가 있었기 떄문에 interface기반 proxy인 jdk 프록시가 적용된거 아닐까..

- 중요 포인트
  - 특정 조건에 맞을 때 프록시 로직을 적용하는 기능도 공통으로 제공되었으면?
  - 앞서 특정 메서드 이름의 조건에 맞을 때만 프록시 부가 기능이 적용되는 코드를 직접 만들었다.
  -  스프링은 Pointcut 이라는 개념을 도입해서 이 문제를 일관성 있게 해결한다.

- 의견
  - 3page 그림 보는게 낫다. 

## 프록시 팩토리 - 예제 코드 1 (3)

- 개요
  - Advice 는 프록시에 적용하는 부가 기능 로직이다.
  -  이것은 JDK 동적 프록시가 제공하는 InvocationHandler 와 CGLIB가 제공하는 MethodInterceptor 의 개념과 유사한다. 
  -  둘을 개념적으로 추상화 한 것이다. 프록시 팩토리를 사용하면 둘 대신에 Advice 를 사용하면 된다

여기는 그냥 pdf 보는게 낫다. 내용이 많음. 그리고 다 중요함

- 포인트
  - MethodInterceptor는 advice라고 부른다. 
    - > MethodInterceptor가 advice를 상속하고 있어서. 여기서 MethodInterceptor는 CGLIb 말고 AOP의 꺼

- 포인트2
  - proxyfactory 예시에서 보면 interface가 있는 serviceImple을 target으로 사용하였기 때문에
  - proxy에는 jdk dynamic proxy가 사용됨
  - 따라서 `proxyClass=class jdk.proxy2.$Proxy10` 라는 이름으로 프록시가 만들어진것을 알수 잇음

- 포인트3
  - `AopUtils` 는 proxyfactory를 이용해서 만든 proxy를 대상으로만 사용가능
  - 즉 내가 CGLIB이나 jdk proxy로 만든 proxy에는 사용할수 없다. 


## 프록시 팩토리 - 예제 코드 2

## 포인트 컷, 어드바이스, 어드바이저 - 소개

## 예제코드1 - 어드바이저

## 예제코드2 - 직접만든 포인트 컷

## 예제코드3 - 스프링이 제공하는 포인트 컷

## 예제코드4 - 여러 어드바이저 함꼐 적용

## 프록시 팩토리 - 적용1

## 프록시 팩토리 - 적용2

## 정리
