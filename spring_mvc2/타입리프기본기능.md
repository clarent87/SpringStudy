# Spring MVC 2

## 타입리프 기본기능

- 텍스트 text, utext (8)
  - HTTP 엔티티, escape 중요 포인트
  - utext가 unescape 버전
  - `th:` 와 쓰는 방법이 있고 http contents 영역에 직접 쓰는 방법도 있음

- 변수 - SpringEL (12)
  - springEL 표현식을 그대로 차용해서 타입리프에서도 쓸수 있다.
  - > 별거 아니고 타입리프로 전달된 collection/object의 값들을 여러 방식으로 접근할수 있다.
  - `th:with` 이용해서 타입리프안에서 변수 선언 가능
    - **지역 변수는 선언한 테그 안에서만 사용할 수 있다**

- 기본 객체들
  - 기본 객체들인 request,response,session 같은 것들은 view로 자동으로 넘어감
    - 즉 굳이 request에서 data빼서 model에 추가할 필요가 없음
      - > model 개념은 mvc1의 v1? 인가 뭐 거기에 코드가 있음( 아마? )

- 유틸리티 객체와 날짜 (17)
  - 그냥 이런게 있다 및 link만 소개하고 넘어감
  - java8의 시간 클래스 사용가능하다 소개함
    - 타입리프에서는 `#temporals`를 이용해서 작업함. -> 이거 쫌 특이함.

- URL링크 (20)
  - 템플릿에서 URL 링크를 만드는것 th:herf랑 주로 같이 씀
  - > 이거 보니까 쿼리 파람세팅이 강점이고, path variable에서도 값이 들어가는 공간이랑. 실제 값 매핑이 따로 되어 있어서.
  - > 뭔가 유지 보수에 좋나봄
  - `"@{/hello/{param1}(param1=${param1}, param2=${param2})}"` 에서
    - param1은 path variable에 있으니까 매칭된거고, 남는 param2는 쿼리 파라메터가 된다고 함
  - `@{/hello(param1=${param1}, param2=${param2})}`는 쿼리 파라메터 붙이는건데.. 보니까 원리가 같네.. 위랑.

- 리터럴
  - **문자리터럴 주의점 있음.**  
    - 공백이 없이 진행되는 문자만 토큰으로 인식해 주는데, 이거 모르고 문자열 중간에 공백넣으면 안된다. 오류남
    - 원래 문자열 리터럴은 항상 ''로 감싸야함.
  - 리터럴 대체 문법

- 연산 (24)
  - 비교연산: HTML 엔티티를 사용해야 하는 부분을 주의하자,
    - > 근데 예시 보니까 잘만 사용하는데? 아.. < 나 > 이거 단독 사용이 문제인거같은데..
  - Elvis 연산자: 조건식의 편의 버전
    - `"${data}?: '데이터가 없습니다.'"` 이건데 data가 있으면 data가 출력 없으면 뒤에꼐 출력
    - 3항연산자의 좀더 강화된 버전
  - No-Operation

- 속성값 설정 (26)
  - intellij
    - copy path가 있네.. file에서 오른쪽 클릭하면..
  - 속성 추가에서..
    - th:attrappend, th:attrprepend 는 예시의 문자열 값을 그대로 속성에 붙임
      - ( 그래서 문자열에 띄어쓰기를 넣었음. 문자가 그냥 붙어 버리면 이상하니까)
    - th:classappend 는 문자열을 적절히 붙여줌 (즉 알아서 띄어쓰기 해줌)
      - > 이거는 종종 쓴다함. 위에 두개는 잘안쓰지만..
  - checked 처리
    - html에서는 `checked="false"` 의경우도 check처리됨. 즉 checked속성에 어떤 값이든 있기만 하면 check처리되는거.
    - 이게 불편해서 th:checked는 제대로 동작함. (제대로 라고 하는게 웃기긴함)

- 반복 (28)
  - `th:each` 이용하는데 웬만한 컬렉션 변수는 모두 풀어서 사용가능 MAP도 가능
  - 재미 있는것은, 현재 반복에 대한 상태를 가져올수 있음

- 조건부 평가 (30)
  - `if , unless ( if 의 반대)` 지원
    - 이건 해당 조건을 충족하지 못하면 해당 html tag는 삭제 되는 동작을 한다.
  - `switch case`문도 있음
    - case에서 값 비교시 *는 default를 의미하네. pdf에도 있음

- 주석 (32)
  - 주석의 종류가 3가지나 있고 ( html 주석 한개, 타입리프용 2개), 그중 한가지가 좀 특이함
  - 타입리프 파서 주석
    - 한줄 짜리 주석이 있고, 여러줄 주석이 있다. 여러줄 주석의 시작은 `<!--/*-->` 종료는 `<!--*/-->`
    - 이사의의 내용은 모두 삭제 된다. (html주석은 삭제되는 형태가 아니라 해당 내용을 브라우저가 렌더링 해주지 않는 형태)
  - 타입리프 프로토타입 주석
    - 잘 쓰지는 않는다.
    - html 파일을 그냥 웹브라우저로 보면 브라우저가 렌더링 안해줘서 안보임
    - 근데 타입리프를 통해 렌더링 되면 해당 내용은 주석 처리되는게 아니라 렌더링 되서 나온다.
    - 즉. 타입리프 렌더링 전에만 주석 처리되는 형태
  - > 주석 종류 3개중에서는 보통 타입리프 파서 주석을 쓴다.

- 블록 (34)
  - 약간 특별한 기능인데 종종 쓴다고 함
  - `<th:block>` 타입리프가 제공하는 유일한 tag, 보통 타입리프는  HTML 태그안에 속성으로 기능을 제공하는데,, 블록만 특이한 케이스
    - 앞선 예들이 모두 그랬다. `th:xx` 처럼.. 썻었는데 이게 속성
  - 이부분은 사용 예가 중요하네..
    - th:each랑 같이 쓰는듯 함 보통..
    - 이거 없었다면 loop 돌릴때 `<div>` 태그 두개를 한번에 돌리기가 까다로움..
      - div 태그안에 th:each쓰는건 해당 태그 하나 안에서만 each를 도는거..
    - > 설명이 애매한데 예시를 보던지 강좌를 봐라

- 자바스크립트 인라인 (36)
  - 타임리프는 자바스크립트에서 타임리프를 편리하게 사용할 수 있는 자바스크립트 인라인 기능을 제공한다
  - 자바스크립트 인라인 사용 전후의 차이가 중요
    - `var username = [[${user.username}]];` 이거의 경우 자바스크립트 인라인 사용이 없을때
    - `var username = userA` 로 되기 때문에 javascirpt 문법 오류남. (userA는 변수로 인식됨.. 당연하게도..)
    - `var username = "[[${user.username}]]";` 오류 안내려면 옆처럼 "로 감싸야함
    - 그럼 `var username = "userA"` 게 되니까 정상
  - 자바스크립트 내츄럴 템플릿 지원가능해짐
    - 이것은, 자바스크립트가 사용된 html을 그냥 브라우저에서 열면 보이는 내용과
    - 타입리프 렌더링후의 내용이 달리보이는 그 개념이다. ( 타입리프에 의해 치환된 값이 쓰임)
    - > 타입리프 처럼..
    - > 예시를 통해 확인 해라
  - 객체 입력 지원
    - 객체를 json으로 치환해서 넣어줌.-> 예제를 봐라
  - 자바스크립트 인라인 each
    - > 요거 특이하네.

- 템플릿 조각 (40)
  - > pdf에도 나와 있듯 직접 실행해 봐야 이해됨
  - `th:insert` 및 `th:replace`는 동작에 차이가 있다
    - insert는 assign된 내용을 tag에 붙여 넣는다. pdf에 예시 잘 되어 있음
    - replace는 assign된 내용을 tag와 치환한다.
  - 부분 포함 단순 표현식
    - `~{...}` 를 사용하는 것이 원칙이지만 템플릿 조각을 사용하는 코드가 단순하면 이 부분을 생략할 수 있다.
      - `~{...}`이게 템플릿 조각 문법  
  - 파라미터 사용
    - 파라미터를 전달해서 동적으로 조각을 렌더링 할 수도 있다 -> pdf 참조
